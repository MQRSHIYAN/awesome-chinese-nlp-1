# 文本相似度计算

本文介绍文本相似度计算工具的使用，主要包括：
* WordMoverDistance：tools.similarity中实现，基于词移距离的文本相似度计算。
* WordVectorSimilarity： tools.similarity中实现，基于word-vector的句子相似度计算。
* Levenshtein：常用的句子相似度计算的python包，其中包括：计算汉明距离、编辑距离、莱文斯坦比等。

## WordMoverDistance



```python
from tools.ltp import Ltp
from tools.similarity import WordMoverDistance

word_vector_path = "/path/to/word_vector"
ltp_model_path = "/path/to/ltp/model"

# 相似度计算模型
sim = WordMoverDistance(word_vector_path)

# ltp模型用于分词
ltp = Ltp(ltp_model_path)

# 分词
str1 = ltp.segment("我是中国人，我深爱着我的祖国")
str2 = ltp.segment("中国是我的母亲，我热爱她")

# 计算相似度
print("相似度：{}".format(sim.distance(str1, str2)))

# 相似度：0.5040331478972442
```

## WordVectorSimilarity



```python
from tools.ltp import Ltp
from tools.similarity import WordVectorSimilarity

word_vector_path = "/path/to/word_vector"
ltp_model_path = "/path/to/ltp/model"

# 相似度计算模型
sim = WordVectorSimilarity(word_vector_path)

# ltp模型用于分词
ltp = Ltp(ltp_model_path)

# 分词
str1 = ltp.segment("我是中国人，我深爱着我的祖国")
str2 = ltp.segment("中国是我的母亲，我热爱她")

# 计算相似度
print("相似度：{}".format(sim.distance(str1, str2)))

# 相似度：0.5040331478972442
```

## Levenshtein

本部分将会介绍 Levenshtein 中常用的相似度计算方法。

1. 计算汉明距离： ```Levenshtein.hamming(str1, str2)```

要求str1和str2必须长度一致。是描述两个等长字串之间对应位置上不同字符的个数。如：

```
>>> Levenshtein.hamming('早上好', '晚上好')
1
```

2. 计算编辑距离：```Levenshtein.distance(str1, str2)```

描述由一个字串转化成另一个字串最少的操作次数，在其中的操作包括插入、删除、替换。如：

```
>>> Levenshtein.distance('早上好啊', '晚上好')
2
```

3. 计算莱文斯坦比：Levenshtein.ratio(str1, str2)

常用的句子相似度计算方法。计算公式 r = (sum - ldist) / sum, 其中sum是指str1 和 str2 字串的长度总和，ldist是类编辑距离。如下，sum=7，ldist=2 (2中计算过)，r=(7-2)/7。

```
>>> Levenshtein.ratio('早上好啊', '晚上好')
0.5714285714285714
```


